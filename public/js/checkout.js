$(document).ready(function(){var t=$("#cartId").val(),a=$("#userId").val();if(window.location.pathname===`/ostoskori/${t}/maksu`){var o=$("#payToStoreBtn"),e=$("#cancelBtn"),n=($("#payToStore"),$("#payToStoreForm"));o.on("click",function(t){t.stopPropagation(),o.fadeOut(1e3),n.fadeIn(1e3)}),e.on("click",function(t){t.stopPropagation(),n.fadeOut(1e3),o.fadeIn(1e3)})}else{var s,i=$(".tab-pane"),r=$("#dcPrice"),l=$(".tabsMenuItem"),c={id:"5ae82c7ac91983155b4d0227"};function u(t){for(var a=0;a<i.length;a++)i[a].classList.remove("active"),i[a].getAttribute("id")===t&&i[a].classList.add("active")}u(),l[0].classList.add("active"),i[0].classList.add("active"),$(".tabsMenuItem").on("click",function(){c.id=$(this).attr("id");for(var t=0;t<l.length;t++)l[t].classList.remove("active");this.classList.add("active"),u(c.id),r.html(""),s=$(this).attr("value"),r.html(`${0===Number(s)?s+",00 €":s+"0 €"}`);$(this).children("input").attr("value")});var p=$("#totalPrice");$(".tabsMenuItem").on("click",function(a){$("#dcPriceValue").val();$.ajax({url:`/ostoskori/${t}/kassa`,type:"PUT",data:c,success:function(t){$("#totalPrice").html(""),$("#totalPrice").html(`${Number.isInteger(t)?t+",00 €":t+"0 €"}`)},error:function(t){console.log(t)}})});var d=$("#totalPrice").attr("value"),m=$("#promptForCoupon"),v=$("#bonuSystemTotalPrice"),f=$("#couponDiscountValue"),h=$("#couponIdValue").val();d>=20&&!h&&$.get(`/profiili/${a}/kuponki`,function(t){"success"===t.message&&m.html(`<p>Voitte maksaa tämän oston osittain tai kokonaan ${t.coupon.value},00 € arvoisella kupongilla. <button class="btn btn-info" type="button" id="useCouponBtn" value="${t.coupon._id}">Käytä kuponki</button></p>`)}),$("#promptForCoupon").on("click","#useCouponBtn",function(a){a.preventDefault(),$(this).prop("disabled",!0);var o={couponId:$(this).attr("value"),value:"KuponkiID"};$.ajax({url:`/ostoskori/${t}/kassa`,type:"PUT",data:o,success:function(t){var a,o;$("#success").html('\n\t\t\t\t\t\t<div class="alert alert-success alert-dismissible" role="alert">\n  \t\t\t\t\t\t\t<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n  \t\t\t\t\t\t\t<strong>Onnistui!</strong> 20,00 € on onnistuneesti vähennetty loppusummasta!\n\t\t\t\t\t\t</div>'),p.html(`${Number.isInteger(t.total_price)?t.total_price+",00 €":t.total_price+"0 €"}`),f.html("- 20,00 €"),v.html(`${a=t.bonus_system_total_price,o=function(t){for(var a=1;Math.round(t*a)/a!==t;)a*=10;return Math.log(a)/Math.LN10},`${Number.isInteger(a)?`${a},00 €`:2===o(a)?`${parseFloat(a).toFixed(2)} €`:o(a)>2?`${parseFloat(a).toFixed(2)} €`:`${a}0 €`}`}`)},error:function(t){console.error(t)}})})}});