$(document).ready(function(){$("#adminSearchForm").on("submit",function(t){t.preventDefault();var a=$("#adminSearchTerm").val();""!==a&&a.length>=2?$.get("/admin/product?page=1&search="+a,function(t){"no results"!==t?($("#productGrid").html(""),$(".pagination").hide(1e3),$(".productsOnPage").hide(1e3),t.products.map(function(t){return t}).forEach(function(t){$("#resultHeader").html("Tuloksia hakusanalle "+a),$("#productGrid").append(`\n\t\t\t\t\t\t\t<div class="productlist col-md-10">\n\t\t\t\t\t\t\t\t<div class="col-md-2">\n\t\t\t\t\t\t\t\t\t<img class="img-responsive" src="${t.cover}" alt="${t.title} - ${t.name}">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="col-md-6">\n\t\t\t\t\t\t\t\t\t<h4>${t.title}, ${t.unit_price} €</h4>\n\t\t\t\t\t\t\t\t\t<h4>${t.name}</h4>\n\t\t\t\t\t\t\t\t\t<p><strong>${t.category}</strong> ${t.year}, ${t.label}</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="col-md-4 edit-product-buttons">\n\t\t\t\t\t\t\t\t\t<a href="/admin/product/${t._id}/edit" class="btn btn-warning"><i class="fa fa-edit" aria-hidden="true"></i></a>\n\t\t\t\t\t\t\t\t\t<form action="/admin/product/${t._id}?_method=PATCH" method="POST">\n\t\t\t\t\t\t\t\t\t\t<button class="btn btn-primary" type="submit"><i class="fa fa-archive" aria-hidden="true"></i> Arkistoi</button>\n\t\t\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t\t\t\t<form class="deleteProduct" value="${t._id}">\n\t\t\t\t\t\t\t\t\t\t<button class="btn btn-danger" type="submit" id="${t._id}">\n\t\t\t\t\t\t\t\t\t\t\t<i class="fa fa-trash-o" aria-hidden="true"></i>\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t`)}),$("#adminSearchTerm").val("")):($("#error").html(`\n\t\t\t\t\t\t<div class="alert alert-danger alert-dismissible fade in" role="alert">\n\t\t\t\t\t\t\t<button type="button" class="close" data-dismiss="alert" aria-label="Close">\n            \t\t\t\t\t<span aria-hidden="true">&times;</span>\n          \t\t\t\t\t</button>\n\t\t\t\t\t\t\t<p>Valitettavasti hakusanalla ${a}, ei löytynyt yhtään hakutulosta.</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t`),$("#adminSearchTerm").val(""))}):($("#error").html('\n\t\t\t\t<div class="alert alert-danger alert-dismissible fade in" role="alert">\n\t\t\t\t\t<button type="button" class="close" data-dismiss="alert" aria-label="Close">\n            \t\t\t<span aria-hidden="true">&times;</span>\n          \t\t\t</button>\n\t\t\t\t\t<p>Hakusanan täytyy olla vähintään 2 merkkiä pitkä.</p>\n\t\t\t\t</div>\n\t\t\t'),$("#adminSearchTerm").val(""))}),$(".editTrackName").on("click",function(){$(this).closest(".wrapper").find(".editTrackNameForm").slideToggle(1e3)})});