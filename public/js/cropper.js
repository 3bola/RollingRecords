$(document).ready(function(){var t,e=window.URL||widndow.webkitURL,n=($("#imgPreview"),$("#imgBtns")),i=$("#imageInput"),s=($("#submitBtn"),$("#productCreateForm")),a=$("#successMsg");function r(){$("#errorMsg").html(""),$("#imgPreview").cropper("destroy"),$("#imgPreview").removeAttr("src"),$("#imageInput").show(),$("#submitBtn").show(),i.prop("disabled",!1),n.hide()}s.on("change","#cover",function(t){if(a=3e6,(!(this.files[0].size>a)||(r(),$("#errorMsg").append('\n\t\t\t\t<div class="alert alert-warning alert-dismissible" role="alert">\n  \t\t\t\t\t<button type="button" class="close" data-dismiss="alert" aria-label="Close">\n  \t\t\t\t\t\t<span aria-hidden="true">&times;</span>\n  \t\t\t\t\t</button>\n  \t\t\t\t\t<strong>Varoitus!</strong> \n  \t\t\t\t\tMaksimi sallittu tiedostokoko on 3MB.\n\t\t\t\t</div>\n\t\t\t'),0))&&(i=i="cover","image/jpg"===(s=(s=document.getElementById(i).files[0].type).toString())||"image/png"===s||"image/jpeg"===s||"image/bmp"===s||(r(),$("#errorMsg").append('\n\t\t\t\t<div class="alert alert-warning alert-dismissible" role="alert">\n  \t\t\t\t\t<button type="button" class="close" data-dismiss="alert" aria-label="Close">\n  \t\t\t\t\t\t<span aria-hidden="true">&times;</span>\n  \t\t\t\t\t</button>\n  \t\t\t\t\t<strong>Varoitus!</strong> \n  \t\t\t\t\tVain \'.jpg\', \'.jpeg\', \'.png\' tai \'.bmp\' kuvatiedostot ovat sallittuja.\n\t\t\t\t</div>\n\t\t\t'),0))){$("#errorMsg").html("");var n=new FileReader;n.onload=function(t){document.getElementById("imgPreview").src=t.target.result,$("#imgPreview").on("load",function(){var t,e,n;$("#errorMsg").html(""),t=1,e=400,n=400,$("#imgPreview").cropper({aspectRatio:t,viewMode:1,responsive:!0,background:!0,modal:!1,zoomable:!0,zoomOnTouch:!0,cropBoxResizable:!0,minCropBoxWidth:e,minCropBoxHeight:n,ready:function(){}}),$("#imageInput").hide(),$("#submitBtn").hide(),$("#imgBtns").show()}).on("error",function(){document.getElementById("imgPreview").src="",r(),$("#errorMsg").html("Kuvan latauksessa ilmeni vika.")})},n.readAsDataURL(this.files[0])}var i,s,a;!function(t,n,i){var s,a;(s=t.files[0])&&((a=new Image).onload=function(){(this.width<n||this.height<i)&&(r(),$("#errorMsg").append(`\n          \t\t\t\t<div class="alert alert-warning alert-dismissible" role="alert">\n  \t\t\t\t\t\t\t<button type="button" class="close" data-dismiss="alert" aria-label="Close">\n  \t\t\t\t\t\t\t\t<span aria-hidden="true">&times;</span>\n  \t\t\t\t\t\t\t</button>\n  \t\t\t\t\t\t\t<strong>Varoitus!</strong> \n  \t\t\t\t\t\t\t\tKuvan koon on oltava vähintään, ${n} * ${i} pikseliä leveä ja korkea.\n\t\t\t\t\t\t</div>\n\t\t\t\t\t`))},a.src=e.createObjectURL(s))}(this,300,300)}),$("#submitImage").on("click",function(e){e.preventDefault(),t=$("#imgPreview").cropper("getData",!0),$.post("/admin/product/data",t,function(t){"success"===t&&($("#imgPreview").cropper("destroy"),$("#imgPreview").removeAttr("src"),$("#imgBtns").hide(),$("#submitBtn").show(),$("#imageInput").show(),$("#imageInput").prop("disabled",!0),a.html('\n\t\t\t\t\t<div class="alert alert-success alert-dismissible" role="alert">\n  \t\t\t\t\t\t<button type="button" class="close" data-dismiss="alert" aria-label="Close">\n  \t\t\t\t\t\t\t<span aria-hidden="true">&times;</span>\n  \t\t\t\t\t\t</button>\n  \t\t\t\t\t\t<strong>Onnistui!</strong> \n  \t\t\t\t\t\tKuva on onnistuneesti lisätty.\n\t\t\t\t\t</div>\n\t\t\t\t'))})}),$("#resetImage").on("click",function(t){t.preventDefault(),r()}),s.on("submit",function(){$("body").scrollTop(1e3)})});