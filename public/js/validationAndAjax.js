$(document).ready(function(){$("#searchForm").on("submit",function(t){t.preventDefault();var e=$("#searchTerm").val();""!==e&&e.length>=2?$.get("/lp:t?page=1&search="+e,function(t){if("no results"!==t){$("#grid").html(""),$(".pagination").hide(1e3);var a=t.products.map(function(t){return t});$("#title").html(t.title),a.forEach(function(t){$("#grid").append(`\n\t\t\t\t\t\t\t<div class="rig-cell col-md-3">\n\t\t\t\t\t\t\t\t<a href="/lp:t/${t._id}">\n\t\t\t\t\t\t\t\t\t<div class="thumbnail">\n\t\t\t\t\t\t\t\t\t\t<img src="${t.cover}" class="rig-img img-responsive" />\n\t\t\t\t\t\t\t\t\t\t<p class="rig-icon"><i class="fa fa-search-plus" aria-hidden="true"></i></p>\n\t\t\t\t\t\t\t\t\t\t<div class="rig-overlay"></div>\n\t\t\t\t\t\t\t\t\t\t<div class="product_grid_header">\n\t\t\t\t\t\t\t\t\t\t\t<h3>${t.title}</h3>\n\t\t\t\t\t\t\t\t\t\t\t<h4>${t.name}</h4>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t<div class="thumbnail">\n\t\t\t\t\t\t\t\t\t<div class="btn-group btn-group-sm cart-buttons" role="group" aria-label="...">\n\t\t\t\t\t\t\t\t\t\t\t<input type="button" class="btn btn-default total_price" value="${t.unit_price} €" />\n\t\t\t\t\t\t\t\t\t\t\t<input type="hidden" class="unit_price" value="${t.unit_price}">\n\t\t\t\t\t\t\t\t\t\t\t<input type="hidden" class="total_unit_price" value="${t.unit_price}">\n\t\t\t\t\t\t\t\t\t\t\t<input type="hidden" class="tax_amount" value="${t.tax}">\n\t\t\t\t\t\t\t\t\t\t\t<input type="hidden" class="total_tax_amount" value="${t.tax}">\n\t\t\t\t\t\t\t\t\t\t\t<input type="hidden" class="unit_price_excluding_tax" value="${t.unit_price_excluding_tax}">\n\t\t\t\t\t\t\t\t\t\t\t<input type="hidden" class="total_unit_price_excluding_tax" value="${t.unit_price_excluding_tax}">\n\t\t\t\t\t\t\t\t\t\t\t<input type="hidden" class="quantity_total" value="${t.total_quantity}">\n\t\t\t\t\t\t\t\t\t\t\t<input type="hidden" value="${t._id}" class="product_id">\n\t\t\t\t\t\t\t\t\t\t\t<button type="button" class="btn btn-success addToCart"><i class="fa fa-shopping-cart" aria-hidden="true"></i></button>\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<hr role="separator" class="divider">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t`)}),$("#searchTerm").val("")}else $("#error").html(`\n\t\t\t\t\t\t<div class="alert alert-danger alert-dismissible fade in" role="alert">\n\t\t\t\t\t\t\t<button type="button" class="close" data-dismiss="alert" aria-label="Close">\n            \t\t\t\t\t<span aria-hidden="true">&times;</span>\n          \t\t\t\t\t</button>\n\t\t\t\t\t\t\t<p>Valitettavasti hakusanalla ${e}, ei löytynyt yhtään hakutulosta.</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t`),$("#searchTerm").val("")}):($("#error").html('\n\t\t\t\t<div class="alert alert-danger alert-dismissible fade in" role="alert">\n\t\t\t\t\t<button type="button" class="close" data-dismiss="alert" aria-label="Close">\n            \t\t\t<span aria-hidden="true">&times;</span>\n          \t\t\t</button>\n\t\t\t\t\t<p>Hakusanan täytyy olla vähintään 2 merkkiä pitkä.</p>\n\t\t\t\t</div>\n\t\t\t'),$("#searchTerm").val(""))});var t=!1;$("#genres").on("click",function(){!1===t?($("#genresMenu").slideDown(1e3),t=!0):($("#genresMenu").slideUp(1e3),t=!1)});t=!1;$("#genres2").on("click",function(){!1===t?($("#genresMenu").slideDown(1e3),t=!0):($("#genresMenu").slideUp(1e3),t=!1)}),$("#smallImage").mouseenter(function(){$("#bigImage").fadeIn(700)}),$("#smallImage").mouseleave(function(){$("#bigImage").fadeOut(700)}),$("#username").on("change",function(){var t=$("#username").val();$.post("/kayttajahallinta/compareuname",t,function(e){"success"===e?($("#usernameError").html(""),$("#username").removeClass("error"),$("#username").addClass("success")):($("#username").removeClass("success"),$("#username").addClass("error"),$("#usernameError").html("Käyttäjänimi "+t+" on jo rekisteröity."))})}),$("#email").on("change",function(){var t=$("#email").val();$.post("/kayttajahallinta/compareemail",t,function(e){"success"===e?($("#emailError").html(""),$("#email").removeClass("error"),$("#email").addClass("success")):($("#email").removeClass("success"),$("#email").addClass("error"),$("#emailError").html("Sähköposti "+t+" on jo rekisteröity."))})}),$("#menu-toggle").click(function(t){t.preventDefault(),$("html, body").animate({scrollTop:0},"medium"),$("#wrapper").toggleClass("toggled")})});