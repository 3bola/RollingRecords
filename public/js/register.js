$(document).ready(function(){var s,a,e,t,r,i,n,o,l,m,d={username:"",email:"",password:"",confPassword:"",firstname:"",lastname:"",mobile_number:"",address:"",zipcode:"",city:"",conditions:!1};$("#signUpForm").on("submit",function(s){s.preventDefault(),d.conditions&&""!==d.username&&""!==d.email&&""!==d.mobile_number&&""!==d.address&&""!==d.zipcode&&""!==d.city&&""!==d.password&&""!==d.confPassword&&""!==d.firstname&&""!==d.lastname?$.post("/kayttajahallinta/rekisteroidy",$("#signUpForm").serialize(),function(s){"success"===s.success?($(".form-control").val(""),$(".form-control").removeClass("success"),$("#registerMsg").html('\n\t\t\t\t\t\t<div class="alert alert-success alert-dismissible fade in" role="alert">\n\t\t\t\t\t\t\t<button type="button" class="close" data-dismiss="alert" aria-label="Close">\n            \t\t\t\t\t<span aria-hidden="true">&times;</span>\n          \t\t\t\t\t</button>\n\t\t\t\t\t\t\t<p>Kiitos, rekisteröinti onnistui.</p>\n\t\t\t\t\t\t\t<p>Sähköpostiinne on lähetetty, käyttäjätilin aktivointi linkki, joka on voimassa yhden tunnin rekisteröinti hetkestä.</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t'),$("#signUpForm").html(""),$("html, body").animate({scrollTop:0},"medium")):$("#registerMsg").html('\n\t\t\t\t\t\t<div class="alert alert-danger alert-dismissible fade in" role="alert">\n\t\t\t\t\t\t\t<button type="button" class="close" data-dismiss="alert" aria-label="Close">\n            \t\t\t\t\t<span aria-hidden="true">&times;</span>\n          \t\t\t\t\t</button>\n\t\t\t\t\t\t\t<p>Hups, Jokin meni pieleen rekisteröinnissä.</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t')}):$("#registerMsg").html('\n\t\t\t\t<div class="alert alert-danger alert-dismissible fade in" role="alert">\n\t\t\t\t\t<button type="button" class="close" data-dismiss="alert" aria-label="Close">\n            \t\t\t<span aria-hidden="true">&times;</span>\n          \t\t\t</button>\n\t\t\t\t\t<p>Varmista, että kaikki pakolliset kentät ovat täytetty.</p>\n\t\t\t\t</div>\n\t\t\t')}),$("#username").on("change",function(){""!==(s=$("#username").val())&&/^[a-zA-Z0-9]{2,12}$/.test(s)?$.post("/kayttajahallinta/compareuname",$("#signUpForm").serialize(),function(a){"success"===a?($("#usernameErr").html(""),$("#username").removeClass("error"),$("#username").addClass("success"),d.username=s):($("#username").removeClass("success"),$("#username").addClass("error"),$("#usernameErr").html("Käyttäjätunnus <strong>'"+s+"'</strong> on jo rekisteröity."),$("#username").val(""),d.username="")}):($("#username").removeClass("success"),$("#username").addClass("error"),$("#usernameErr").html("Käyttäjätunnuksen on oltava 2-12 merkkiä pitkä ja se voi sisältää kirjaimia a-z, A-Z sekä numeroita 0-9."),$("#username").val(""),d.username="")}),$("#email").on("change",function(){""!==(a=$("#email").val())&&/^[a-zA-Z0-9\_\-\.]+@[a-zA-Z0-9\.\-]+\.[a-zA-Z]{2,4}$/.test(a)?$.post("/kayttajahallinta/compareemail",$("#signUpForm").serialize(),function(s){"success"===s?($("#email").addClass("success"),$("#email").removeClass("error"),$("#emailErr").html(""),d.email=a):($("#email").removeClass("success"),$("#email").addClass("error"),$("#emailErr").html("Sähköposti <strong>'"+a+"'</strong> on jo rekisteröity."),$("#email").val(""),d.email="")}):($("#email").removeClass("success"),$("#email").addClass("error"),$("#emailErr").html("'"+a+"', ei vastaa sähköpostiosoitteen vaatimaa formaattia."),$("#email").val(""),d.email="")}),$("#mobileNumber").on("change",function(){""===(e=$("#mobileNumber").val())||e.length<1?($("#mobileNumber").removeClass("success"),$("#mobileNumber").addClass("error"),$("#mobileNumberErr").html("Puhelin numero on vaadittu."),$("#mobileNumber").val(""),d.mobile_number=""):""!==e&&/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/im.test(e)?($("#mobileNumber").removeClass("error"),$("#mobileNumber").addClass("success"),$("#mobileNumberErr").html(""),d.mobile_number=e):($("#mobileNumber").removeClass("success"),$("#mobileNumber").addClass("error"),$("#mobileNumberErr").html("Antamanne puhelinnumero, ei vastaa Suomen virallista puhelinnuero formaattia."),$("#mobileNumber").val(""),d.mobile_number="")}),$("#password").on("change",function(){""===(t=$("#password").val())||t.length<8?($("#password").removeClass("success"),$("#password").addClass("error"),$("#passwordErr").html("Salasanan on oltava vähintään 8 merkkiä pitkä."),$("#password").val(""),d.password=""):/^[a-zA-Z0-9\-\_\(\)\;\:]+$/.test(t)?($("#password").removeClass("error"),$("#password").addClass("success"),$("#passwordErr").html(""),d.password=t):($("#password").removeClass("success"),$("#password").addClass("error"),$("#passwordErr").html("Salasanan voi sisältää kirjaimia a-z, A-Z, numeroita 0-9 sekä erikoismerkeistä : ; _ - ()."),$("#password").val(""),d.password="")}),$("#confPassword").on("change",function(){""===(r=$("#confPassword").val())||r!==t?($("#confPassword").removeClass("success"),$("#confPassword").addClass("error"),$("#confPasswordErr").html("Salasanat eivät täsmää."),$("#confPassword").val(""),d.confPassword=""):($("#confPassword").removeClass("error"),$("#confPassword").addClass("success"),$("#confPasswordErr").html(""),d.confPassword=r)}),$("#firstname").on("change",function(){""!==(i=$("#firstname").val())&&/^[a-zA-ZäöüÄÖÜß]{2,30}$/.test(i)?($("#firstname").removeClass("error"),$("#firstname").addClass("success"),$("#firstnameErr").html(""),d.firstname=i):($("#firstname").removeClass("success"),$("#firstname").addClass("error"),$("#firstnameErr").html("Etunimen oltava 2 - 30 merkkiä pitkä ja se voi sisältää vain kirjaimia a-z ja A-Z."),$("#firstname").val(""),d.firstname="")}),$("#lastname").on("change",function(){""!==(n=$("#lastname").val())&&/^[a-zA-ZäöüÄÖÜß]{2,30}$/.test(n)?($("#lastname").removeClass("error"),$("#lastname").addClass("success"),$("#lastnameErr").html(""),d.lastname=n):($("#lastname").removeClass("success"),$("#lastname").addClass("error"),$("#lastnameErr").html("Sukunimen oltava 2 - 30 merkkiä pitkä ja se voi sisältää vain kirjaimia a-z ja A-Z."),$("#lastname").val(""),d.lastname="")}),$("#address").on("change",function(){""!==(m=$("#address").val())&&/^[a-zA-Z0-9äöüÄÖÜß_ ]{2,50}$/.test(m)?($("#address").removeClass("error"),$("#address").addClass("success"),$("#addressErr").html(""),d.address=m):($("#address").removeClass("success"),$("#address").addClass("error"),$("#addressErr").html("Katuosoitteen oltava 2 - 50 merkkiä pitkä ja se voi sisältää vain kirjaimia a-Å ja A-Å."),$("#address").val(""),d.address="")}),$("#zipcode").on("change",function(){""!==(l=$("#zipcode").val())&&/^[0-9]{2,30}$/.test(l)?($("#zipcode").removeClass("error"),$("#zipcode").addClass("success"),$("#zipcodeErr").html(""),d.zipcode=l):($("#zipcode").removeClass("success"),$("#zipcode").addClass("error"),$("#zipcodeErr").html("Postinumeron oltava 2 - 30 merkkiä pitkä ja se voi sisältää vain numeroita 0-9."),$("#zipcode").val(""),d.zipcode="")}),$("#city").on("change",function(){""!==(o=$("#city").val())&&/^[a-zA-ZäöüÄÖÜß-]{2,30}$/.test(o)?($("#city").removeClass("error"),$("#city").addClass("success"),$("#cityErr").html(""),d.city=o):($("#city").removeClass("success"),$("#city").addClass("error"),$("#cityErr").html("Kaupungin nimen oltava 2 - 30 merkkiä pitkä ja se voi sisältää vain kirjaimia a-z ja A-Z."),$("#city").val(""),d.city="")}),$("#terms").on("click",function(){d.conditions=!1===d.conditions})});