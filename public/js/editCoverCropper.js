$(document).ready(function(){var t,e=window.URL||window.webkitURL,a=($("#imagePreview"),$("#imageButtons")),n=$("#selectImage"),i=$("#submitButton"),s=($("#imageUploadForm"),$("#product_id").val(),$("#errorMessage")),o=$("#successMessage");$("#coverImageInput");function r(){s.html(""),o.html(""),$("#imagePreview").cropper("destroy"),$("#imagePreview").removeAttr("src"),n.show(500),$("#selectImage").prop("disabled",!1),i.show(500),a.hide(500)}$("#imageUploadForm").on("change","#coverImageInput",function(t){if(m=3e6,(!(this.files[0].size>m)||(r(),s.html('\n\t\t\t\t<div class="alert alert-warning alert-dismissible" role="alert">\n  \t\t\t\t\t<button type="button" class="close" data-dismiss="alert" aria-label="Close">\n  \t\t\t\t\t\t<span aria-hidden="true">&times;</span>\n  \t\t\t\t\t</button>\n  \t\t\t\t\t<strong>Varoitus!</strong> \n  \t\t\t\t\tMaksimi sallittu tiedostokoko on 3MB.\n\t\t\t\t</div>\n\t\t\t'),0))&&(l=l="coverImageInput","image/jpg"===(d=(d=document.getElementById(l).files[0].type).toString())||"image/jpeg"===d||"image/png"===d||"image/bmp"===d||(r(),s.html('\n\t\t\t\t<div class="alert alert-warning alert-dismissible" role="alert">\n  \t\t\t\t\t<button type="button" class="close" data-dismiss="alert" aria-label="Close">\n  \t\t\t\t\t\t<span aria-hidden="true">&times;</span>\n  \t\t\t\t\t</button>\n  \t\t\t\t\t<strong>Varoitus!</strong> \n  \t\t\t\t\tVain \'.jpg\', \'.jpeg\', \'.png\' tai \'.bmp\' kuvatiedostot ovat sallittuja.\n\t\t\t\t</div>\n\t\t\t'),0))){s.html("");var o=new FileReader;o.onload=function(t){document.getElementById("imagePreview").src=t.target.result,$("#imagePreview").on("load",function(){var t,e,o;s.html(""),t=1,e=576,o=576,$("#imagePreview").cropper({aspectRatio:t,viewMode:1,responsive:!0,background:!0,modal:!1,zoomable:!0,zoomOnTouch:!0,cropBoxResizable:!0,minCropBoxWidth:e,minCropBoxHeight:o,ready:function(){}}),n.hide(500),i.hide(500),a.show(500)}).on("error",function(){document.getElementById("imagePreview").src="",r(),s.html('\n\t\t\t\t\t\t<div class="alert alert-warning alert-dismissible" role="alert">\n  \t\t\t\t\t\t\t<button type="button" class="close" data-dismiss="alert" aria-label="Close">\n  \t\t\t\t\t\t\t\t<span aria-hidden="true">&times;</span>\n  \t\t\t\t\t\t\t</button>\n  \t\t\t\t\t\t\t<strong>Varoitus!</strong> \n  \t\t\t\t\t\t\tKuvan latauksessa ilmeni vika.\n\t\t\t\t\t\t</div>\t\n\t\t\t\t\t')})},o.readAsDataURL(this.files[0])}var l,d,m;!function(t,a,n){var i,s;(i=t.files[0])&&((s=new Image).onload=function(){(this.width<a||this.height<n)&&(reset(),$("#errorMsg").append(`\n          \t\t\t\t<div class="alert alert-warning alert-dismissible" role="alert">\n  \t\t\t\t\t\t\t<button type="button" class="close" data-dismiss="alert" aria-label="Close">\n  \t\t\t\t\t\t\t\t<span aria-hidden="true">&times;</span>\n  \t\t\t\t\t\t\t</button>\n  \t\t\t\t\t\t\t<strong>Varoitus!</strong> \n  \t\t\t\t\t\t\t\tKuvan koon on oltava vähintään, ${a} * ${n} pikseliä leveä ja korkea.\n\t\t\t\t\t\t</div>\n\t\t\t\t\t`))},s.src=e.createObjectURL(i))}(this,300,300)}),$("#cropImage").on("click",function(e){e.preventDefault(),t=$("#imagePreview").cropper("getData",!0);$("#product_id").val();$.post("/admin/product/data",t,function(t){"success"===t&&($("#imagePreview").cropper("destroy"),$("#imagePreview").removeAttr("src"),a.hide(500),i.show(600),n.show(),$("#selectImage").prop("disabled",!0),o.html('\n\t\t\t\t\t<div class="alert alert-success alert-dismissible" role="alert">\n  \t\t\t\t\t\t<button type="button" class="close" data-dismiss="alert" aria-label="Close">\n  \t\t\t\t\t\t\t<span aria-hidden="true">&times;</span>\n  \t\t\t\t\t\t</button>\n  \t\t\t\t\t\t<strong>Onnistui!</strong> \n  \t\t\t\t\t\tKuva on onnistuneesti lisätty.\n\t\t\t\t\t</div>\n\t\t\t\t'))})}),$("#resetImageSelection").on("click",function(t){t.preventDefault(),r()}),$("#imageUploadForm").on("submit",function(){$("body").scrollTop(1e3)})});